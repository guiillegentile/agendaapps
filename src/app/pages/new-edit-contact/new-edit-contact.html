<div id="container" class="card">
  <h2>{{ isEditMode ? 'Editar contacto' : 'Nuevo contacto' }}</h2>

  <form (ngSubmit)="saveContact()" #contactForm="ngForm">
    <div>
      <label for="first-name">Nombre*</label>
      <input
        id="first-name"
        name="firstName"
        type="text"
        [(ngModel)]="contact.firstName"
        required
        minlength="2"
        maxlength="20"
        #firstName="ngModel"
      />
      @if (firstName.dirty && firstName.invalid) {
        <p class="error">El nombre es obligatorio y debe tener al menos 2 letras.</p>
      }
    </div>

    <div>
      <label for="last-name">Apellido</label>
      <input
        id="last-name"
        name="lastName"
        type="text"
        [(ngModel)]="contact.lastName"
        maxlength="20"
      />
    </div>

    <div>
      <label for="phone">Teléfono*</label>
      <input
        id="phone"
        name="number"
        type="text"
        [(ngModel)]="contact.number"
        required
        minlength="3"
        maxlength="30"
      />
    </div>

    <div>
      <label for="email">Email</label>
      <input
        id="email"
        name="email"
        type="email"
        [(ngModel)]="contact.email"
        maxlength="40"
      />
    </div>

    <div>
      <label for="favourite">Favorito</label>
      <input
        id="favourite"
        name="isFavorite"
        type="checkbox"
        [(ngModel)]="contact.isFavorite"
      />
    </div>

    <div>
      <label for="address">Dirección</label>
      <input
        id="address"
        name="address"
        type="text"
        [(ngModel)]="contact.address"
        minlength="5"
      />
    </div>

    <div>
      <label for="company">Compañía</label>
      <input
        id="company"
        name="company"
        type="text"
        [(ngModel)]="contact.company"
        minlength="2"
      />
    </div>

    <div>
      <label for="image">URL Imagen</label>
      <input
        id="image"
        name="image"
        type="text"
        [(ngModel)]="contact.image"
        minlength="10"
      />
    </div>

    @if (errorEnBack) {
      <p class="error">Error indeterminado, intente nuevamente.</p>
    }

    <div class="buttons">
      <button type="submit" [disabled]="contactForm.invalid">
        {{ isEditMode ? 'Guardar cambios' : 'Crear contacto' }}
      </button>
      <button type="button" class="cancel" (click)="cancel()">Cancelar</button>
    </div>
  </form>
</div>